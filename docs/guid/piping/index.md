

## 概念
ASP.NET Core中，中间件和过滤器是用于处理HTTP请求和响应的组件，它们都是通过管道（Pipeline）来依次处理请求的。

**管道** （Pipeline）:是一个由多个中间件和过滤器组成的处理链，用于处理HTTP请求。当一个请求进入应用程序时，它会依次经过管道中的各个组件进行处理，最终生成响应并返回给客户端。

**中间件** （Middleware）:是一个处理HTTP请求和响应的组件。它可以在请求进入应用程序之前、之后或者在处理过程中进行操作。中间件可以执行一些通用的任务，例如路由、认证、日志记录等。每个中间件都可以选择将请求传递给下一个中间件，也可以直接返回响应，终止请求的传递。

**过滤器** （Filter）:是一种特殊类型的中间件，用于实现对控制器和动作方法的全局或局部级别的行为过滤和处理。过滤器可以在请求进入控制器之前、之后或者在动作方法执行期间进行操作。它们可以用于添加认证、授权、日志记录、异常处理等功能。


## 区别
过滤器和中间件都是 ASP.NET Core 中用于处理请求和响应的机制，但它们有一些区别：

过滤器是针对 MVC 控制器的，而中间件可以用于处理所有 HTTP 请求。
过滤器是基于 MVC 生命周期的，而中间件是基于 HTTP 请求管道的。
过滤器可以通过 IoC 容器注入依赖，而中间件不能。
过滤器可以同时处理多个 MVC 控制器上的操作，而中间件只能处理单个 HTTP 请求。

中间件是用于处理HTTP请求和响应的组件，可以在请求的各个阶段进行操作；而过滤器是一种特殊类型的中间件，用于实现对控制器和动作方法的行为过滤和处理。管道则是将这些中间件和过滤器连接起来，形成一个处理链，依次处理请求并生成响应。




异常/错误处理
当应用在开发环境中运行时：
开发人员异常页中间件 (UseDeveloperExceptionPage) 报告应用运行时错误。
数据库错误页中间件 (UseDatabaseErrorPage) 报告数据库运行时错误。
当应用在生产环境中运行时：
异常处理程序中间件 (UseExceptionHandler) 捕获以下中间件中引发的异常。
HTTP 严格传输安全协议 (HSTS) 中间件 (UseHsts) 添加 Strict-Transport-Security 标头。
HTTPS 重定向中间件 (UseHttpsRedirection) 将 HTTP 请求重定向到 HTTPS。
静态文件中间件 (UseStaticFiles) 返回静态文件，并简化进一步请求处理。
Cookie 策略中间件 (UseCookiePolicy) 使应用符合欧盟一般数据保护条例 (GDPR) 规定。
用于路由请求的路由中间件 (UseRouting)。
身份验证中间件 (UseAuthentication) 尝试对用户进行身份验证，然后才会允许用户访问安全资源。
用于授权用户访问安全资源的授权中间件 (UseAuthorization)。
会话中间件 (UseSession) 建立和维护会话状态。 如果应用使用会话状态，请在 Cookie 策略中间件之后和 MVC 中间件之前调用会话中间件。
用于将 Razor Pages 终结点添加到请求管道的终结点路由中间件（带有 MapRazorPages 的 UseEndpoints）